/*! app.min.js file */

var Validator=function(t){this.form=document.getElementById(t),this.formElements={name:{reg:/^[a-zA-Z]{2,20}$/,msg:"Please enter valid Name"},surname:{reg:/^[a-zA-Z]{2,20}$/,msg:"Please Enter valid Surname."},email:{reg:/^[a-z-0-9_+.-]+\@([a-z0-9-]+\.)+[a-z0-9]{2,7}$/i,msg:"Please Enter valid e-mail address."},phone:{reg:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im,msg:"Please enter a valid phone number"},password:{reg:/^(?=.*?[^\w\s]).{8,}$/,msg:"Must contain at least one special character and at least 8 or more characters"}}};Validator.prototype.bindEvents=function(){this.form&&this.form.addEventListener("submit",function(t){for(var e in t.preventDefault(),this.formElements)this.validate(e)}.bind(this))},Validator.prototype.validate=function(t){var e=this.formElements[t],r=document.getElementById(t).value;e.reg.test(r)||this.handleError(t,e.msg)},Validator.prototype.handleError=function(t,e){var r=document.getElementById(t),n=r.nextElementSibling;r.className="input-error",n.innerText=e,n.style.display="block",r.addEventListener("keyup",function(t){r.className="",n.style.display="none"})};var validator=new Validator("form");validator.bindEvents(),Handlebars.registerHelper("times",function(t,e){for(var r="",n=0;n<t;++n)r+=e.fn(n);return r}),function(){var t={init:function(){this.allProducts=[],this.loadProductsData(),this.bindEvents()},loadProductsData:function(t){$.getJSON("data/products.json",function(t){this.allProducts=t,this.filteredData=t,this.sortProducts("asc-name",t)}.bind(this))},getAllProducts:function(){return this.allProducts},setFilteredProducts:function(t){this.filteredData=t},renderProducts:function(t){var e,r=$(".all-products"),n=$("#products-template").html();e=Handlebars.compile(n),r.html(e(t)),this.renderTotalProductsText(t.length)},renderTotalProductsText:function(t){$(".total-products").text(t)},bindEvents:function(){$(".filter-data select").on("change",function(t){var e=$(t.currentTarget).val(),r=$(t.currentTarget).data("type");this.filterProducts(e,r)}.bind(this)),$(".sort-data select").on("change",function(t){var e=$(t.currentTarget).val();this.sortProducts(e,this.filteredData)}.bind(this)),$(".view-type").on("click",function(t){this.toggleView(t)}.bind(this))},filterProducts:function(e,r){var t;t=this.getAllProducts().filter(function(t){return t[r].includes(e)||"/"===e}),this.setFilteredProducts(t),this.renderProducts(t)},sortProducts:function(t,e){var r=e;switch(t){case"desc-name":r=r.sort(function(t,e){return t.name>e.name?-1:t.name<e.name?1:void 0});break;case"asc-name":r=r.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:void 0});break;case"desc-price":r=r.sort(function(t,e){return t.price>e.price?-1:t.price<e.price?1:void 0});break;case"asc-price":r=r.sort(function(t,e){return t.price>e.price?1:t.price<e.price?-1:void 0})}this.renderProducts(r)},toggleView:function(){$(event.currentTarget).toggleClass("fa-list-alt fa-th"),$(".all-products").toggleClass("list-view grid-view")}};$(document).ready(function(){t.init()})}();